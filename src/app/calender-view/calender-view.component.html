
<div *ngIf="loading$ | async"><h1>TEST</h1></div>

<div class="container">
  <div class="row">
    <div class="col">
      
    </div>
  </div>
  <div class="row">
    <div class="col-4">
      <app-month-view [viewDate]="viewDate" [events]="appointments" (viewDateChange)="changeViewDate($event)"></app-month-view>
      <app-next-viewing></app-next-viewing> 
    </div>
    <div class="col-8">
      
      <app-calendar-header [(view)]="view" [(viewDate)]="viewDate">
      </app-calendar-header>

      <mwl-calendar-week-view [viewDate]="viewDate" [events]="appointments" [headerTemplate]="headerTemplate"
        [eventTemplate]="eventTemplate" [dayStartHour]="8"
        [dayEndHour]="20">
      </mwl-calendar-week-view>
    </div>
  </div>
  <div class="row">
    
  </div>
</div>



<ng-template #headerTemplate let-days="days" let-locale="locale" let-dayClicked="dayClicked"
  let-eventDropped="eventDropped">
  <div class="cal-day-headers cursor-default">
    <div class="cal-header" *ngFor="let day of days" [class.cal-past]="day.isPast" [class.cal-future]="day.isFuture"
      [class.cal-drag-over]="day.dragOver" (mwlClick)="dayClicked.emit({date: day.date})" mwlDroppable
      (dragEnter)="day.dragOver = true" (dragLeave)="day.dragOver = false"
      (drop)="day.dragOver = false; eventDropped.emit({event: $event.dropData.event, newStart: day.date, fromHeader: true})">
      <div class="top" [class.today]="day.isToday">
        <div class="day-label text-uppercase">
          {{ day.date | calendarDate:'weekViewColumnSubHeader':locale }}&nbsp;{{ day.date |
          calendarDate:'weekViewColumnHeader':locale }}
        </div>
        <!-- <div class="day-number">{{ day.date | calendarDate:'weekViewColumnSubHeader':locale }}</div>                       -->
      </div>
    </div>
  </div>
</ng-template>

<ng-template #eventTemplate let-weekEvent="weekEvent" let-locale="locale">
  <div (click)="onHourClick(weekEvent.event)">
    <div class="eventColorMark" style="height: 20px; width: 20px; border-radius: 10px;"
      [ngStyle]="{ backgroundColor: weekEvent.event.color?.primary }">

    </div>
    {{weekEvent.event.title}}
  </div>
</ng-template>










<ng-template #modalContent let-close="close">
  <div class="modal-header">
    <h5 class="modal-title">Event action occurred</h5>
    <button type="button" class="close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div>
      TEST
    </div>
    <div>
      Event:
      <pre>{{ eventsData | json }}</pre>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" (click)="close()">
      OK
    </button>
  </div>
</ng-template>